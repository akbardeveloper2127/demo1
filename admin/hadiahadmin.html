<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Atur Hadiah Bonus</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:Arial,sans-serif;background:#292d3c;color:#fff;min-height:100vh;padding-bottom:80px;}
.header{display:flex;justify-content:center;align-items:center;padding:12px 0;background:#1e2230;color:#c1f52b;font-weight:bold;font-size:18px;position:relative;}
.header .back-btn{position:absolute;left:15px;font-size:22px;color:#c1f52b;text-decoration:none;}
.container{max-width:700px;margin:20px auto;padding:15px;}
.form-box{background:#1e2230;padding:15px;border-radius:12px;margin-bottom:20px;}
.form-box h3{margin-bottom:10px;color:#c1f52b;}
.form-group{margin-bottom:10px;}
.form-group label{display:block;margin-bottom:6px;font-size:14px;font-weight:bold;color:#c1f52b;}
.form-group input{width:100%;padding:10px;border-radius:8px;border:none;background:#292d3c;color:#fff;}
.btn{display:inline-block;padding:10px 16px;border-radius:8px;font-weight:bold;cursor:pointer;border:none;}
.btn-primary{background:#c1f52b;color:#000;}
.btn-primary:hover{background:#a5d92b;}
.btn-danger{background:#e74c3c;color:#fff;}
.btn-danger:hover{background:#c0392b;}
.table{width:100%;border-collapse:collapse;margin-top:15px;}
.table th,.table td{border:1px solid #444;padding:10px;text-align:center;}
.table th{background:#333;color:#c1f52b;}
.table td{background:#1e2230;}
</style>
</head>
<body>

<div class="header">
    <a href="admin.html" class="back-btn">&#8592;</a>
    Atur Hadiah Bonus
</div>

<div class="container">
    <!-- Form tambah kode bonus -->
    <div class="form-box">
        <h3>Buat Kode Bonus Baru</h3>
        <div class="form-group">
            <label>Kode Bonus</label>
            <input type="text" id="bonusCode" placeholder="Contoh: BONUS10">
        </div>
        <div class="form-group">
            <label>Jumlah Bonus (Rp)</label>
            <input type="number" id="bonusAmount" placeholder="Contoh: 10000">
        </div>
        <div class="form-group">
            <label>Stok</label>
            <input type="number" id="bonusStock" placeholder="Contoh: 5">
        </div>
        <button class="btn btn-primary" id="addBonusBtn">Tambah Kode</button>
    </div>

    <!-- Daftar kode bonus -->
    <h3 style="margin-bottom:10px;color:#c1f52b;">Daftar Kode Bonus</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Kode</th>
                <th>Jumlah</th>
                <th>Stok</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody id="bonusTableBody"></tbody>
    </table>
</div>

<script>
// Format Rupiah
function formatRupiah(angka){
    return 'Rp' + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}

// Ambil data bonus
let bonusData = JSON.parse(localStorage.getItem('bonusCodes') || '[]');

// Render tabel
function renderBonus(){
    const tbody = document.getElementById('bonusTableBody');
    tbody.innerHTML = '';
    bonusData.forEach((item,index)=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>${item.code}</td>
            <td>${formatRupiah(item.amount)}</td>
            <td>${item.stock}</td>
            <td>
                <button class="btn btn-danger" onclick="deleteBonus(${index})">Hapus</button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}
renderBonus();

// Tambah bonus
document.getElementById('addBonusBtn').addEventListener('click',()=>{
    const code = document.getElementById('bonusCode').value.trim().toUpperCase();
    const amount = parseInt(document.getElementById('bonusAmount').value);
    const stock = parseInt(document.getElementById('bonusStock').value);

    if(!code || isNaN(amount) || isNaN(stock) || amount<=0 || stock<=0){
        alert('Isi semua data dengan benar!');
        return;
    }

    // Cek kode unik
    if(bonusData.some(b=>b.code===code)){
        alert('Kode sudah ada!');
        return;
    }

    bonusData.push({code,amount,stock});
    localStorage.setItem('bonusCodes', JSON.stringify(bonusData));

    document.getElementById('bonusCode').value = '';
    document.getElementById('bonusAmount').value = '';
    document.getElementById('bonusStock').value = '';
    renderBonus();
    alert('Kode bonus berhasil ditambahkan!');
});

// Hapus kode bonus
function deleteBonus(index){
    if(confirm('Yakin ingin hapus kode ini?')){
        bonusData.splice(index,1);
        localStorage.setItem('bonusCodes', JSON.stringify(bonusData));
        renderBonus();
    }
}
</script>

</body>
</html>